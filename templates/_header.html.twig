<div class="header">
    <div class="content">
        <div class="lang">
            {% set route = app.request.attributes.get('_route') %}
            {% set route_params = app.request.attributes.get('_route_params') %}
            {% set params = route_params|merge(app.request.query.all) %}

            {% set applocales = locales|split('|') %}

            {%- for locale in applocales -%}
                {%- if not loop.last -%}
                    <a href="{{ path(route, params|merge({ _locale: locale })) }}">
                        {{- locale -}}
                    </a>
                {%- endif -%}
            {%- endfor -%}
        </div>
    </div>
</div>